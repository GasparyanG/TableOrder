{% extends 'base.html.twig' %}
{#
    - [x] make review dynamic (1)
    - [x] prev, next reservation date and time (2)
#}
{% block title %}Hello ReservationController!{% endblock %}

{% block body %}
    {% if success %}
        <div class="row mt-4 mb-4 ">
            <div class="bg-success text-center p-1 rounded col-md-10">
                <h3>Congratulations, Your Reservation is Done!</h3>
            </div>
            <div class="col-md-2">
                <a href="/home" class="btn btn-lg btn-outline-success">Go To Home</a>
            </div>
        </div>
    {% endif %}
    {% if rightDuration %}
        <div class="bg-danger p-2 mt-4 mb-4 text-center">
            <h5>
                You can reserve this table only for <span class="text-light">{{ rightDuration|date("i") }}</span> minutes
            </h5>
        </div>
    {% endif %}
    {% if errors %}
        <div class="mt-4 mb-4">
        {% for errorMsg in errors %}
            <div class="bg-danger text-center mt-3">
               errorMsg
            </div>
        {% endfor %}
        </div>
    {% endif %}
    {% if error %}
        <h1 class="alert-danger">
            Sth went wrong please try again
        </h1>
    {% endif %}
    <div class="mt-4">
        <div class="card">
            <div class="row">
                <div class="col-md-6">
                    <img src={{ "/photo/restaurant/cover-photo/" ~ reservation.restauran.coverPhoto }} class="card-img-top" alt="">
                </div>
                <div class="col-md-6">
                    <h1 class="card-title">
                        {{ reservation.restauran.name }}
                    </h1>
                    {# review is needed #}
                    <h3 class="card-subtitle">
                        location: <span class="text-muted">{{ reservation.restauran.location }}</span>
                    </h3>
                    <h4>
                        {# 1 #}
                        {% if review %}
                            Review: <span class="text-muted"><i class="far fa-star"></i> {{ review }}</span>
                        {% else %}
                             Review: <span class="text-muted"><i class="far fa-star"></i> No Review</span>
                        {% endif %}
                    </h4>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="list-group list-group-flush col-md-6">
                <div class="list-group-item">
                    <h5><i class="fas fa-female"></i> <span class="text-muted">Person Amount</span> {{ reservation.table.personAmount }}</h5>
                </div>
                <div class="list-group-item">
                    <h5><i class="far fa-clock"></i> <span class="text-muted">Reservation Time</span> {{ reservation.reservationTime|date("H:i:s") }}</h5>
                </div>
                <div class="list-group-item">
                    <h5><i class="far fa-calendar-alt"></i> <span class="text-muted">Reservation Date</span> {{ reservation.reservationDate|date("Y-m-d") }}</h5>
                </div>
            </div>
            {# 2 #}
            <div class="list-group list-group-flush col-md-6">
                <div class="list-group-item">
                    <h5><i class="fas fa-hashtag"></i> <span class="text-muted">Table Number</span> {{ reservation.table.tableNumber }}</h5>
                </div>
                {# previous reservation #}
                {% if prevReservation %}
                    <div class="list-group-item">
                        <h5><i class="fas fa-backward"></i> <span class="text-muted">Previous Reservation</span> {{ prevReservation.reservationTime|date("H:i:s") }}</h5>
                    </div>
                 {% else %}
                    <div class="list-group-item">
                        <h5><i class="fas fa-backward"></i> <span class="text-muted">Previous Reservation</span> Not Reserved Yet</h5>
                    </div>
                {% endif %}

                {# next reservation #}
                {% if nextReservation %}
                    <div class="list-group-item">
                        <h5><i class="fas fa-forward"></i> <span class="text-muted">Next Reservation</span> {{ nextReservation.reservationTime|date("H:i:s") }}</h5>
                    </div>
                {% else %}
                    <div class="list-group-item">
                        <h5><i class="fas fa-forward"></i> <span class="text-muted">Next Reservation</span> Not Reserved Yet</h5>
                    </div>
                {% endif %}
            </div>
        </div>
        <form action="" method ="POST">
            <div class="input-group mt-4">
                <div class="input-group-prepend">
                    <span class="input-group-text">Duration in minutes</span>
                </div>
                <input type="input" class="form-control" placeholder="e.g. 60, 120, etc." name ="amountOfTime">
            </div>
            <button type="submit" class="btn btn-primary mt-3">Reserve This Table</button>
        </form>
    </div>
{% endblock %}
